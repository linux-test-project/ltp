#!/bin/sh

# patsubst.test is part of the GNU m4 testsuite

#. ${srcdir}/defs

cat ${srcdir}/patsubst.m4 >in

cat <<\EOF >ok
# traceon(`patsubst')
OBS: GNUs not Unix
OBS: GNUs OBS: not OBS: Unix
G=NUs n=ot U=nix
(GNUs)() (not)() (Unix)
(GNUs) (not) (Unix)
  
GNUs not Unix
EOF

cat <<\EOF >okerr
m4: in: 4: WARNING: \0 will disappear, use \& instead in replacements
EOF

M4PATH=$srcdir:$srcdir/../tests $M4 -d in >out 2>err
sed -e "s,$M4: ,m4: ," err >sederr && mv sederr err
$CMP -s out ok && $CMP -s err okerr
